
<!DOCTYPE html>
<title>
Cheese Trap Activity
</title>
<style>
p.a {
	font-size: 20px;
    font-family: "Comic Sans MS";
}
</style>

<body>
<p class="a">
Arrange the pieces in the BOTTOM in the correct order in the TOP box (or to the side). </br>
Key:</br>
a = 4</br>
b = 3</br>
c = 10</br>
</p>
    <svg id="mySvg" width="0" height="0">
      <defs id="mdef">
        <pattern id="imageID" x="0" y="0" height="40" width="40">
          <image x="0" y="0" width="40" height="40" xlink:href="https://images-na.ssl-images-amazon.com/images/I/71gI-IUNUkL._SL1500_.jpg"></image>
        </pattern>
		<pattern id="imageID1" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/1.png"></image>
        </pattern>
		<pattern id="imageID2" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/2.png"></image>
        </pattern>
		<pattern id="imageID3" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/3.png"></image>
        </pattern>
		<pattern id="imageID4" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/4.png"></image>
        </pattern>	
		<pattern id="imageID5" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/5.png"></image>
        </pattern>
		<pattern id="imageID6" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/6.png"></image>
        </pattern>
		<pattern id="imageID7" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/7.png"></image>
        </pattern>
		<pattern id="imageID8" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/8.png"></image>
        </pattern>
		<pattern id="imageID1" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/1.png"></image>
        </pattern>
		<pattern id="imageID2" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/2.png"></image>
        </pattern>
		<pattern id="imageID3" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/3.png"></image>
        </pattern>
		<pattern id="imageID4" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/4.png"></image>
        </pattern>	
		<pattern id="imageID5" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/5.png"></image>
        </pattern>
		<pattern id="imageID6" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/6.png"></image>
        </pattern>
		<pattern id="imageID7" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/7.png"></image>
        </pattern>
		<pattern id="imageID8" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/8.png"></image>
        </pattern>
		<pattern id="imageID9" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/9.png"></image>
        </pattern>
		<pattern id="imageID10" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/10.png"></image>
        </pattern>
		<pattern id="imageID11" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/11.png"></image>
        </pattern>
		<pattern id="imageID12" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/12.png"></image>
        </pattern>	
		<pattern id="imageID13" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/13.png"></image>
        </pattern>
		<pattern id="imageID14" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/14.png"></image>
        </pattern>
		<pattern id="imageID15" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/15.png"></image>
        </pattern>
		<pattern id="imageID16" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/16.png"></image>
        </pattern>	
		<pattern id="imageID17" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/17.png"></image>
        </pattern>
		<pattern id="imageID18" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/18.png"></image>
        </pattern>
		<pattern id="imageID19" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/19.png"></image>
        </pattern>
		<pattern id="imageID20" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/20.png"></image>
        </pattern>
		<pattern id="imageID21" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/21.png"></image>
        </pattern>
		<pattern id="imageID22" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/22.png"></image>
        </pattern>
		<pattern id="imageID23" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/23.png"></image>
        </pattern>
		<pattern id="imageID24" x="0" y="0" height="1" width="1">
          <image x="20" y="20" width="112" height="112" xlink:href="images/24.png"></image>
        </pattern>
		<pattern id="imageID0" x="0" y="0" height="1800" width="700">
          <image x="0" y="0" width="1800" height="700" xlink:href="images/board.png"></image>
        </pattern>
	</defs>
	</svg>

<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script>
var width = 1800,
    height = 1000,
    resolution = 5,//how many pixels we allow the image to shift
    r = 78;

var points = d3.range(10).map(function() {
	//generate points for the circles
  return {
    x: round(Math.random() * width, resolution),
    y: round(Math.random() * height, resolution)
  };
});


var n = 25;//we have 24 images
var imagePoints = new Array();
for (var i = 1; i < n; i++){//indexing at 1 makes it easier to ID the image and algebra result number
	var yCo = 720;
	var xCo = i*115;
	
	if(i>8){//the original sheet has 8 per row, let's make it loop back up.
	yCo = 600;
	xCo = (i-8)*115
	}
	if(i>16){//do it again for 16-24
	yCo = 470;
	xCo = (i-16)*115
	}
	
	var obj = {x: xCo, y: yCo, id:i};
	imagePoints.push(obj);
}
    


var drag = d3.behavior.drag()
    .origin(function(d) { return d; })
    .on('drag', dragged);

var svg = d3.select('body').append('svg')
    .attr('width', width)
    .attr('height', height);
	
	//append base image here as well?
	svg.append("svg:image")
.attr('x', 50)
.attr('y', 50)
.attr('width', 897)
.attr('height', 332)
.attr("xlink:href", "images/board.png")

svg.selectAll('.vertical')
    .data(d3.range(1, width / resolution))
 // .enter().append('line')
 //draws vertical lines
    .attr('class', 'vertical')
    .attr('x1', function(d) { return d * resolution; })
    .attr('y1', 0)
    .attr('x2', function(d) { return d * resolution; })
    .attr('y2', height);

svg.selectAll('.horizontal')
    .data(d3.range(1, height / resolution))
  //.enter().append('line')
  //draws horizontal lines 
    .attr('class', 'horizontal')
    .attr('x1', 0)
    .attr('y1', function(d) { return d * resolution; })
    .attr('x2', width)
    .attr('y2', function(d) { return d * resolution; });
	
	//we still want them there to snap the objects into place

//var circles = svg.selectAll('circle')
//    .data(points)
//  .enter().append('circle')
//    .attr('cx', function(d) { return d.x; })
//    .attr('cy', function(d) { return d.y; })
//    .attr('r', r)
//   .call(drag);
	
var circles = svg.selectAll('circle')
    .data(imagePoints)
  .enter().append('circle')
    .attr('cx', function(d) { return d.x; })
    .attr('cy', function(d) { return d.y; })
    .attr('r', r)
	.style("fill", "#000")
	.style("fill", function(d){
		var urlString = "url(#imageID" +d.id + ")";
		console.log(urlString);
		return urlString;})
	//.style("fill", "url(#imageID)")//use a fill function to determine the picture URL
    .call(drag);

function dragged(d) {
  var x = d3.event.x,
      y = d3.event.y,
      gridX = round(Math.max(r, Math.min(width - r, x)), resolution),
      gridY = round(Math.max(r, Math.min(height - r, y)), resolution);

  d3.select(this).attr('cx', d.x = gridX).attr('cy', d.y = gridY);
}

function round(p, n) {
  return p % n < n / 2 ? p - (p % n) : p + n - (p % n);
}

</script>
</body>
